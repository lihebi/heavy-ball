#+TITLE: Docker setup

* building image

#+begin_example
docker build -t myimage .
#+end_example

To test

#+begin_example
docker run -it --rm myimage
#+end_example

* Running the container
To really use the VM:

FIXME print the ID

#+begin_example
docker run -itd --privileged myimage
#+end_example

If using d, it will be detached, but the IP address is not printed out
either. So to see the IP address:

#+begin_example
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' <container_id>
#+end_example

I probably want to create a named container for long-term usage:

#+begin_example
docker run -itd --name my-name myimage
#+end_example

Or I can see the logs by:

#+begin_example
docker logs <container_id>
#+end_example

* Inside the VM

The lxd daemon should be running. But I'll need to manually init the
lxd (only for the first time) with:

#+begin_example
sudo lxd init --auto
#+end_example
